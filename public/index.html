<html>

<head>
  <title>Msgpack</title>
  <link rel="stylesheet" href="stylesheets/style.css">
  <link rel="stylesheet" href="stylesheets/solarized-light.css">
</head>

<body>
  <!-- <h3 style="text-align: center;">Msgpack</h3> -->
  <textarea class="src" id="src"></textarea>
  <button onclick="msgpackDecode()">Msgpack Decode</button>
  <pre>
    <code id="dst" class="code json">{
  "hello": "world"
}
    </code>
  </pre>



  <script src="javascripts/jquery-3.5.1.min.js"></script>
  <script src="javascripts/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad()</script>
  <!-- <script src="javascripts/msgpack.min.js"></script>
  <script src="javascripts/bundle.js"></script> -->
  <script>
    $('#src').val("\\xde\\x00(\\xa2Id\\xce\\x05\\xfe\\xde\\xc4\\xa4Name\\xa3\\xe5\\x90\\x96\\xa3Sex\\x02\\xa5Level\\x0f\\xa4Icon\\xce\\x00\\xa7\\xd8\\xc4\\xa6IFrame\\xce\\x00\\x98\\x96\\x81\\xa4Sign\\xc0\\xa3Rmb\\xc0\\xa8GiftCoin\\xc0\\xa4Fame\\x00\\xa3Exp\\x83\\xa2Id\\xce\\x00\\x98\\x96\\x81\\xa6Number\\xcd\\x03\\x96\\xb0XXX_unrecognized\\xc0\\xa5Money\\x83\\xa2Id\\xce\\x00\\x98\\x96\\x82\\xa6Number\\xcd\\x02X\\xb0XXX_unrecognized\\xc0\\xa7Diamond\\x83\\xa2Id\\xce\\x00\\x98\\x96\\x83\\xa6Number\\xcd\\b\\x02\\xb0XXX_unrecognized\\xc0\\xa5State\\x01\\xa4LSId\\xcd'\\x11\\xa4PSId\\xcd\\x03\\xe9\\xa6PSPort\\xc0\\xa4PSIp\\xc0\\xa7Session\\xaa5887551671\\xaaPvpSession\\xa0\\xa7MatCoin\\x83\\xa2Id\\xce\\x00\\x98\\x96\\x86\\xa6Number\\x00\\xb0XXX_unrecognized\\xc0\\xa3Uid\\xbcdena_ioslcm_1300201005495304\\xa8AllMoney\\x83\\xa2Id\\xce\\x00\\x98\\x96\\x82\\xa6Number\\xcd\\x02X\\xb0XXX_unrecognized\\xc0\\xaaAllDiamond\\x83\\xa2Id\\xce\\x00\\x98\\x96\\x83\\xa6Number\\xcd\\b\\x02\\xb0XXX_unrecognized\\xc0\\xa4GMLv\\xc0\\xa3CIp\\xb3112.64.145.90:57879\\xa6Invite\\xa0\\xa5Chose\\xa0\\xabPotencyCoin\\x83\\xa2Id\\xce\\x00\\x98\\x96\\x8e\\xa6Number\\x00\\xb0XXX_unrecognized\\xc0\\xa9GroupCoin\\x83\\xa2Id\\xce\\x00\\x98\\x96\\x8f\\xa6Number\\x00\\xb0XXX_unrecognized\\xc0\\xabTestUserRew\\xc0\\xa7Confirm\\xa0\\xa3Typ\\xa0\\xa7Channel\\xa8LCM_A_CN\\xa6Stamps\\x83\\xa2Id\\xce\\x00\\x98\\x96\\x80\\xa6Number\\xcd!\\xaf\\xb0XXX_unrecognized\\xc0\\xaaFreeStamps\\x83\\xa2Id\\xce\\x01!\\xea\\xc0\\xa6Number\\x00\\xb0XXX_unrecognized\\xc0\\xaaLastUsePID\\xc0\\xa5RName\\x02\\xa8RnReward\\xc3\\xb0XXX_unrecognized\\xc0")
    function msgpackDecode() {
      let src = $('#src').val()
      console.log("src: ", src)
      fetch('/msgpack/decode', {
        method: 'POST',
        body: JSON.stringify({ src }),
        headers: new Headers({
          'Content-Type': 'Application/json'
        })
      }).then(res => res.json())
        .catch(err => console.error('Error: ', err))
        .then(res => {
          console.log("dst: ", res)
          $('#dst').text(JSON.stringify(res, null, 4))
          reloadHighlight()
        })
    }

    function reloadHighlight() {
      document.querySelectorAll('pre code').forEach(block => {
        hljs.highlightBlock(block)
      })
    }
  </script>
</body>

</html>